@model AutoNuoma.ViewModels.SutartisAtaskViewModel

@{
    ViewBag.Title = "Uzsakymai";
}

<h2>Sudarytų užsakymų ataskaita</h2>
<p><b>Parengta:</b> @DateTime.Now</p>

@using (Html.BeginForm())
{
    <div class="form-group">
       <label>Užsakymai nuo: </label>
       <input class="form-inline date-picker" type="datetime" name="nuo" value="@Model.nuo" />
       <label>Užsakymai iki: </label>
       <input class="form-inline date-picker" type="datetime" name="iki" value="@Model.iki" />
       <input class="btn btn-default" type="submit" value="Atrinkti">
    </div>
}


    <table class="table table-striped">
        <tr style="background-color:deepskyblue">
            <th>
                @Html.DisplayNameFor(model => model.sutartys[0].nr)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.sutartys[0].data)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.sutartys[0].VardasPavarde)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.sutartys[0].skirtPat)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.sutartys[0].pat_kiekis)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.sutartys[0].kaina)
            </th>

        </tr>

        @if (Model.sutartys.Count == 0)
        {
            <tr>
                <td colspan="5" align="center"><b style="color:red;">Nurodytame laikotarpyje nebuvo jokių užsakymų ;(</b></td>
            </tr>
        }

        @for (int i = 0; i < Model.sutartys.Count; i++)
        {
            if (i == 0 || Model.sutartys[i].pavadinimas != Model.sutartys[i-1].pavadinimas)
            {
                <tr style="background-color: lightblue">
                    <td colspan="6" align="center"><b>@Model.sutartys[i].pavadinimas</b></td>
                </tr>
            }
    <tr>
        <td>@Model.sutartys[i].nr</td>
        <td>@Html.DisplayFor(x => Model.sutartys[i].data)</td>
        <td>@Model.sutartys[i].VardasPavarde</td>
        <td>@Model.sutartys[i].skirtPat</td>
        <td>@Model.sutartys[i].pat_kiekis</td>
        <td>@Model.sutartys[i].kaina</td>

    </tr>

            if(i == Model.sutartys.Count-1 || Model.sutartys[i].pavadinimas != Model.sutartys[i + 1].pavadinimas)
            {
                <tr>
                    <td colspan="5"></td>
                    <td><b>@Model.sutartys[i].bendraSuma</b></td>
                </tr>
            }

        }

        <tr style="background-color: deepskyblue">
            <td height="10px;" colspan="6" align="center"><b>Bendra suma</b></td>
        </tr>

        <tr>
            <td colspan="5"></td>
            <td>
                @Html.DisplayFor(modelItem => Model.visoSuma)
            </td>
        </tr>
    </table>